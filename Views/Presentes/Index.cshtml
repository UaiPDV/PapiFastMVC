@using X.PagedList.Mvc.Core
@model X.PagedList.IPagedList<BixWeb.Models.Presente>

@{
    ViewData["Title"] = "Presentes Escolhidos";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Pages/Presentes/index.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
}

<div class="presentes-escolhidos-container">
    <!-- Cabeçalho da Página -->
    <div class="page-header">
        <div class="page-header-content">
            <h1>Sua Lista de Presentes</h1>
            <p class="page-subtitle">Confira os itens selecionados e adicione novos se desejar.</p>
        </div>
        <a asp-action="BuscarPresente" asp-controller="Eventos" asp-route-id="@ViewBag.codConvite" class="btn btn-primary-action">
            <i class="bi bi-plus-lg me-2"></i>
            Adicionar Mais Presentes
        </a>
    </div>

    @if (Model == null || !Model.Any())
    {
        <div class="alert alert-light text-center" role="alert">
            Nenhum presente foi selecionado ainda. Comece adicionando itens à sua lista!
        </div>
    }
    else
    {
        <!-- Tabela/Lista de Presentes -->
        <div class="table-wrapper">
            <table class="table presentes-table align-middle">
                <thead>
                    <tr>
                        <th class="produto-col">Produto</th>
                        <th class="preco-col text-center">Preço</th>
                        <th class="acoes-col text-center">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td data-label="Produto">
                                <div class="produto-info">
                                    <img src="@item.Imagem" onerror="this.onerror=null; this.src='https://placehold.co/100x80/f98303/FFFFFF?text=Presente';" alt="Imagem de @item.Nome" class="produto-imagem">
                                    <div class="produto-detalhes">
                                        <span class="produto-nome">@item.Nome</span>
                                        <p class="produto-descricao">@item.Descricao</p>
                                    </div>
                                </div>
                            </td>
                            <td data-label="Preço" class="text-center">
                                <span class="produto-preco">@item.Preco.ToString("C")</span>
                            </td>
                            <td data-label="Ações" class="text-center">
                                <a asp-action="Delete" asp-route-id="@item.codPresente" class="btn btn-action-icon btn-action-danger" title="Remover Presente">
                                    <i class="bi bi-trash3-fill"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Paginação -->
        @if (Model.PageCount > 1)
        {
            <div class="pagination-wrapper">
                @Html.PagedListPager(Model, page => Url.Action("Index", new { page }), new PagedListRenderOptions
                {
                    UlElementClasses = new[] { "pagination", "custom-pagination" },
                    LiElementClasses = new[] { "page-item" },
                    PageClasses = new[] { "page-link" },
                    ActiveLiElementClass = "active"
                })
            </div>
        }

        <!-- Botão de Pagamento -->
        <div class="form-action-buttons">
            <a asp-controller="ReciboPresentes" asp-action="Index" class="btn btn-success btn-lg">
                <i class="bi bi-credit-card-fill me-2"></i>
                Ir para o Pagamento
            </a>
        </div>
    }
</div>

